<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ORACLE - AI Predictive Intelligence | ELUXRAJ</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root{--bg:#0a0a0f;--bg2:#12121a;--card:#1a1a24;--purple:#7c3aed;--cyan:#06b6d4;--green:#10b981;--red:#ef4444;--yellow:#f59e0b;--white:#fff;--gray400:#9ca3af;--gray500:#6b7280}
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--white);min-height:100vh}
        .header{display:flex;justify-content:space-between;align-items:center;padding:20px 32px;border-bottom:1px solid rgba(124,58,237,0.2);background:linear-gradient(180deg,rgba(124,58,237,0.1) 0%,transparent 100%)}
        .title{display:flex;align-items:center;gap:12px}
        .title h1{font-size:1.5rem;font-weight:800;background:linear-gradient(135deg,var(--purple),var(--cyan));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
        .badge{background:linear-gradient(135deg,var(--purple),var(--cyan));color:white;font-size:.65rem;font-weight:700;padding:4px 8px;border-radius:4px}
        .back{color:var(--gray400);text-decoration:none;font-size:.9rem}
        .back:hover{color:var(--white)}
        .container{max-width:1400px;margin:0 auto;padding:32px}
        .asset-section{margin-bottom:16px}
        .asset-label{font-size:.75rem;color:var(--gray500);text-transform:uppercase;letter-spacing:1px;margin-bottom:8px}
        .assets{display:flex;gap:12px;flex-wrap:wrap}
        .asset-btn{background:var(--card);border:1px solid rgba(124,58,237,0.2);color:var(--gray400);padding:12px 20px;border-radius:12px;font-size:.9rem;font-weight:600;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:8px}
        .asset-btn:hover{border-color:var(--purple);color:var(--white)}
        .asset-btn.active{background:linear-gradient(135deg,var(--purple),var(--cyan));border-color:transparent;color:var(--white)}
        .grid{display:grid;grid-template-columns:1fr 1fr;gap:24px}
        @media(max-width:1000px){.grid{grid-template-columns:1fr}}
        .card{background:var(--card);border:1px solid rgba(124,58,237,0.2);border-radius:20px;padding:32px;position:relative}
        .card::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,var(--purple),var(--cyan));border-radius:20px 20px 0 0}
        .score-label{font-size:.85rem;color:var(--gray400);text-transform:uppercase;letter-spacing:2px;margin-bottom:16px;text-align:center}
        .score-circle{width:200px;height:200px;margin:0 auto 24px;position:relative}
        .score-ring{width:100%;height:100%;border-radius:50%;background:conic-gradient(var(--green) 0deg,var(--green) calc(var(--score) * 3.6deg),var(--bg2) calc(var(--score) * 3.6deg));display:flex;align-items:center;justify-content:center}
        .score-inner{width:160px;height:160px;background:var(--card);border-radius:50%;display:flex;flex-direction:column;align-items:center;justify-content:center}
        .score-value{font-family:'JetBrains Mono',monospace;font-size:4rem;font-weight:900;background:linear-gradient(135deg,var(--green),var(--cyan));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
        .score-max{font-size:1rem;color:var(--gray500)}
        .signal{font-size:1.5rem;font-weight:800;text-transform:uppercase;letter-spacing:2px;margin-bottom:8px;text-align:center}
        .signal.buy{color:var(--green)}.signal.sell{color:var(--red)}.signal.hold{color:var(--yellow)}
        .conf{display:inline-block;padding:6px 16px;border-radius:20px;font-size:.8rem;font-weight:600;text-transform:uppercase}
        .conf.high{background:rgba(16,185,129,0.2);color:var(--green)}
        .conf.medium{background:rgba(245,158,11,0.2);color:var(--yellow)}
        .conf.low{background:rgba(107,114,128,0.2);color:var(--gray400)}
        .trade h3{font-size:1rem;color:var(--gray400);text-transform:uppercase;letter-spacing:1px;margin-bottom:24px}
        .prices{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-bottom:24px}
        .price-item{text-align:center;padding:16px;background:var(--bg2);border-radius:12px}
        .price-item label{display:block;font-size:.75rem;color:var(--gray500);text-transform:uppercase;letter-spacing:1px;margin-bottom:8px}
        .price-item .val{font-family:'JetBrains Mono',monospace;font-size:1.25rem;font-weight:700}
        .price-item.entry .val{color:var(--white)}
        .price-item.target .val{color:var(--green)}
        .price-item.stop .val{color:var(--red)}
        .rr{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;background:linear-gradient(135deg,rgba(124,58,237,0.1),rgba(6,182,212,0.1));border-radius:12px;border:1px solid rgba(124,58,237,0.2)}
        .rr label{font-size:.85rem;color:var(--gray400)}
        .rr .val{font-family:'JetBrains Mono',monospace;font-size:1.5rem;font-weight:800;color:var(--green)}
        .full{grid-column:1/-1}
        .section-title{font-size:1.1rem;font-weight:700;margin-bottom:20px;display:flex;align-items:center;gap:10px}
        .factors{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px}
        .factor{background:var(--card);border:1px solid rgba(124,58,237,0.15);border-radius:16px;padding:20px}
        .factor-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
        .factor-name{font-size:.85rem;color:var(--gray400);font-weight:600}
        .factor-score{font-family:'JetBrains Mono',monospace;font-size:1.1rem;font-weight:700}
        .factor-score.bull{color:var(--green)}.factor-score.bear{color:var(--red)}.factor-score.neut{color:var(--yellow)}
        .factor-bar{height:6px;background:var(--bg2);border-radius:3px;overflow:hidden;margin-bottom:8px}
        .factor-fill{height:100%;border-radius:3px;transition:width .5s}
        .factor-fill.bull{background:linear-gradient(90deg,var(--green),var(--cyan))}
        .factor-fill.bear{background:linear-gradient(90deg,var(--red),#f97316)}
        .factor-fill.neut{background:linear-gradient(90deg,var(--yellow),#f97316)}
        .factor-val{font-size:.8rem;color:var(--gray500);text-transform:capitalize}
        .alert{background:var(--card);border:1px solid rgba(124,58,237,0.15);border-radius:16px;padding:20px;display:flex;align-items:center;gap:16px;margin-bottom:12px}
        .alert-icon{font-size:2rem}
        .alert-content{flex:1}
        .alert-title{font-size:1rem;font-weight:700;margin-bottom:4px}
        .alert-desc{font-size:.85rem;color:var(--gray400)}
        .alert-impact{padding:6px 12px;border-radius:20px;font-size:.75rem;font-weight:700;text-transform:uppercase}
        .alert-impact.bullish{background:rgba(16,185,129,0.2);color:var(--green)}
        .alert-impact.bearish{background:rgba(239,68,68,0.2);color:var(--red)}
        .liq-zones{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}
        @media(max-width:768px){.liq-zones{grid-template-columns:1fr}}
        .liq-card{background:var(--card);border:1px solid rgba(124,58,237,0.15);border-radius:16px;padding:20px}
        .liq-card h4{font-size:.9rem;color:var(--gray400);margin-bottom:16px}
        .liq-card.longs h4{color:var(--green)}
        .liq-card.shorts h4{color:var(--red)}
        .liq-level{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid rgba(255,255,255,0.05)}
        .liq-level:last-child{border-bottom:none}
        .liq-price{font-family:'JetBrains Mono',monospace;font-weight:600}
        .liq-lev{font-size:.8rem;color:var(--gray500)}
        .liq-int{font-size:.75rem;padding:4px 10px;border-radius:12px;text-transform:uppercase;font-weight:600}
        .liq-int.high{background:rgba(239,68,68,0.2);color:var(--red)}
        .liq-int.medium{background:rgba(245,158,11,0.2);color:var(--yellow)}
        .liq-int.low{background:rgba(107,114,128,0.2);color:var(--gray400)}
        .reasoning{background:var(--card);border:1px solid rgba(124,58,237,0.15);border-radius:16px;padding:24px}
        .reasoning-sum{font-size:1.1rem;font-weight:600;margin-bottom:20px;line-height:1.5}
        .reasoning-bullets{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:12px}
        .bullet{display:flex;align-items:flex-start;gap:12px;padding:12px 16px;background:var(--bg2);border-radius:12px;font-size:.9rem;color:var(--gray400)}
        .disclaimer{background:rgba(239,68,68,0.1);border:1px solid rgba(239,68,68,0.3);border-radius:12px;padding:16px 20px;font-size:.85rem;color:var(--red);margin-top:24px}
        .meta{display:flex;justify-content:space-between;flex-wrap:wrap;gap:16px;padding:16px 0;border-top:1px solid rgba(255,255,255,0.05);margin-top:24px;font-size:.8rem;color:var(--gray500)}
        .loading{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 20px}
        .spinner{width:60px;height:60px;border:4px solid var(--bg2);border-top-color:var(--purple);border-radius:50%;animation:spin 1s linear infinite;margin-bottom:20px}
        @keyframes spin{to{transform:rotate(360deg)}}
        .loading-text{color:var(--gray400)}
        .locked{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:var(--card);border:2px solid var(--purple);border-radius:20px;padding:40px;text-align:center;z-index:10;max-width:400px;width:90%}
        .locked-icon{font-size:3rem;margin-bottom:16px}
        .locked h3{font-size:1.5rem;font-weight:800;margin-bottom:12px;background:linear-gradient(135deg,var(--purple),var(--cyan));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
        .locked p{color:var(--gray400);margin-bottom:24px;line-height:1.6}
        .upgrade-btn{display:inline-block;background:linear-gradient(135deg,var(--purple),var(--cyan));color:white;font-weight:700;padding:14px 32px;border-radius:12px;text-decoration:none;transition:transform .2s,box-shadow .2s}
        .upgrade-btn:hover{transform:translateY(-2px);box-shadow:0 10px 40px rgba(124,58,237,0.3)}
        .blur{filter:blur(8px);pointer-events:none}
    </style>
</head>
<body>
    <header class="header">
        <div class="title">
            <h1>üîÆ ORACLE</h1>
            <span class="badge">Elite</span>
        </div>
        <a href="/dashboard.html" class="back">‚Üê Back to Dashboard</a>
    </header>
    
    <main class="container">
        <div class="asset-section">
            <div class="asset-label">Crypto</div>
            <div class="assets" id="cryptoAssets">
                <button class="asset-btn active" data-asset="BTC"><span>‚Çø</span> Bitcoin</button>
                <button class="asset-btn" data-asset="ETH"><span>Œû</span> Ethereum</button>
                <button class="asset-btn" data-asset="SOL"><span>‚óé</span> Solana</button>
            </div>
        </div>
        
        <div class="asset-section">
            <div class="asset-label">Indices</div>
            <div class="assets" id="indexAssets">
                <button class="asset-btn" data-asset="SPX"><span>üìà</span> S&P 500</button>
                <button class="asset-btn" data-asset="DJI"><span>üìä</span> Dow Jones</button>
                <button class="asset-btn" data-asset="NDX"><span>üíª</span> NASDAQ</button>
            </div>
        </div>
        
        <div class="asset-section" style="margin-bottom:32px">
            <div class="asset-label">Commodities</div>
            <div class="assets" id="commodityAssets">
                <button class="asset-btn" data-asset="GOLD"><span>ü•á</span> Gold</button>
                <button class="asset-btn" data-asset="SILVER"><span>ü•à</span> Silver</button>
            </div>
        </div>
        
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <div class="loading-text">üîÆ ORACLE analyzing <span id="loadingAsset">BTC</span>...</div>
        </div>
        
        <div class="grid" id="content" style="display:none">
            <div class="card" style="text-align:center">
                <div class="score-label">ORACLE Score</div>
                <div class="score-circle">
                    <div class="score-ring" id="ring" style="--score:75">
                        <div class="score-inner">
                            <div class="score-value" id="score">75</div>
                            <div class="score-max">/100</div>
                        </div>
                    </div>
                </div>
                <div class="signal buy" id="signal">STRONG BUY</div>
                <span class="conf high" id="conf">High Confidence</span>
            </div>
            
            <div class="card trade">
                <h3>üìä Trade Setup</h3>
                <div class="prices">
                    <div class="price-item entry"><label>Entry</label><div class="val" id="entry">$97,245</div></div>
                    <div class="price-item target"><label>Target</label><div class="val" id="target">$105,000</div></div>
                    <div class="price-item stop"><label>Stop Loss</label><div class="val" id="stop">$94,000</div></div>
                </div>
                <div class="rr"><label>Risk/Reward</label><div class="val" id="rr">2.4:1</div></div>
            </div>
            
            <section class="full">
                <h3 class="section-title">üìà Analysis Factors</h3>
                <div class="factors" id="factors"></div>
            </section>
            
            <section class="full" id="whaleSection">
                <h3 class="section-title">üêã Whale Alerts</h3>
                <div id="whales"></div>
            </section>
            
            <section class="full">
                <h3 class="section-title">üí• Liquidation Zones</h3>
                <div class="liq-zones" id="liq"></div>
            </section>
            
            <section class="full">
                <h3 class="section-title">üß† AI Reasoning</h3>
                <div class="reasoning">
                    <div class="reasoning-sum" id="summary"></div>
                    <div class="reasoning-bullets" id="bullets"></div>
                </div>
            </section>
            
            <div class="full disclaimer">‚ö†Ô∏è ORACLE provides AI-powered analysis for informational purposes only. This is NOT financial advice.</div>
            
            <div class="full meta">
                <span>Model: <strong id="model">oracle-v2.0.0</strong></span>
                <span>Generated: <strong id="generated">-</strong></span>
                <span>Expires: <strong id="expires">-</strong></span>
            </div>
        </div>
        
        <div id="lockedState" style="display:none;position:relative;min-height:400px">
            <div class="grid blur" id="blurContent"></div>
            <div class="locked">
                <div class="locked-icon">üîí</div>
                <h3>Unlock ORACLE</h3>
                <p>Get AI-powered predictions with whale tracking, liquidation zones, and smart entry points.</p>
                <a href="/pricing.html" class="upgrade-btn">Upgrade to Elite - $98/mo</a>
            </div>
        </div>
    </main>
    
    <script>
        const API = '/api/v1';
        let asset = 'BTC';
        
        async function load(sym) {
            asset = sym;
            document.querySelectorAll('.asset-btn').forEach(b => b.classList.toggle('active', b.dataset.asset === sym));
            document.getElementById('loading').style.display = 'flex';
            document.getElementById('content').style.display = 'none';
            document.getElementById('lockedState').style.display = 'none';
            document.getElementById('loadingAsset').textContent = sym;
            
            try {
                const res = await fetch(`${API}/oracle/score/${sym}`);
                const data = await res.json();
                
                if (data.data && data.data.is_demo) {
                    document.getElementById('lockedState').style.display = 'block';
                    document.getElementById('loading').style.display = 'none';
                    return;
                }
                
                if (data.ok && data.data) {
                    render(data.data);
                } else {
                    throw new Error(data.detail || 'Failed to load');
                }
            } catch (e) {
                console.error(e);
                alert('Failed to load ORACLE: ' + e.message);
            }
            document.getElementById('loading').style.display = 'none';
        }
        
        function render(d) {
            document.getElementById('content').style.display = 'grid';
            
            const s = d.oracle_score;
            document.getElementById('ring').style.setProperty('--score', s);
            document.getElementById('score').textContent = s;
            
            const sig = document.getElementById('signal');
            sig.textContent = d.signal_type.replace('_', ' ').toUpperCase();
            sig.className = 'signal ' + (d.signal_type.includes('buy') ? 'buy' : d.signal_type.includes('sell') ? 'sell' : 'hold');
            
            const conf = document.getElementById('conf');
            conf.textContent = d.confidence + ' Confidence';
            conf.className = 'conf ' + d.confidence;
            
            document.getElementById('entry').textContent = '$' + d.entry_price.toLocaleString();
            document.getElementById('target').textContent = '$' + d.target_price.toLocaleString();
            document.getElementById('stop').textContent = '$' + d.stop_loss.toLocaleString();
            document.getElementById('rr').textContent = d.risk_reward_ratio + ':1';
            
            const icons = {whale_activity:'üêã',market_sentiment:'üò±',momentum_24h:'üìà',trend_7d:'üìä',funding_rate:'üíπ',exchange_flow:'üí∞',liquidation_risk:'üí•',open_interest:'üìã',volume_flow:'üìâ',volatility:'‚ö°',ath_proximity:'üéØ',social_sentiment:'üê¶'};
            const names = {whale_activity:'Whale Activity',market_sentiment:'Fear & Greed',momentum_24h:'24h Momentum',trend_7d:'7-Day Trend',funding_rate:'Funding Rate',exchange_flow:'Exchange Flow',liquidation_risk:'Liquidation Risk',open_interest:'Open Interest',volume_flow:'Volume',volatility:'Volatility',ath_proximity:'ATH Distance',social_sentiment:'Social'};
            
            document.getElementById('factors').innerHTML = d.factor_breakdown.map(f => {
                const cls = f.score >= 60 ? 'bull' : f.score <= 40 ? 'bear' : 'neut';
                return `<div class="factor"><div class="factor-head"><span class="factor-name">${icons[f.name]||'üìä'} ${names[f.name]||f.name}</span><span class="factor-score ${cls}">${f.score}</span></div><div class="factor-bar"><div class="factor-fill ${cls}" style="width:${f.score}%"></div></div><div class="factor-val">${(f.value||'').replace(/_/g,' ')}</div></div>`;
            }).join('');
            
            const ws = document.getElementById('whaleSection');
            if (!d.whale_alerts || !d.whale_alerts.length) {
                ws.style.display = 'none';
            } else {
                ws.style.display = 'block';
                document.getElementById('whales').innerHTML = d.whale_alerts.map(a => `<div class="alert"><div class="alert-icon">üêã</div><div class="alert-content"><div class="alert-title">${a.title}</div><div class="alert-desc">${a.description}</div></div><span class="alert-impact ${a.impact}">${a.impact}</span></div>`).join('');
            }
            
            const longs = (d.liquidation_zones || []).filter(z => z.type === 'long');
            const shorts = (d.liquidation_zones || []).filter(z => z.type === 'short');
            document.getElementById('liq').innerHTML = `
                <div class="liq-card longs"><h4>üìâ Long Liquidations</h4>${longs.map(z => `<div class="liq-level"><div><span class="liq-price">$${z.price.toLocaleString()}</span><span class="liq-lev"> ${z.leverage}</span></div><span class="liq-int ${z.intensity}">${z.intensity}</span></div>`).join('')}</div>
                <div class="liq-card shorts"><h4>üìà Short Liquidations</h4>${shorts.map(z => `<div class="liq-level"><div><span class="liq-price">$${z.price.toLocaleString()}</span><span class="liq-lev"> ${z.leverage}</span></div><span class="liq-int ${z.intensity}">${z.intensity}</span></div>`).join('')}</div>
            `;
            
            document.getElementById('summary').textContent = d.reasoning_summary;
            document.getElementById('bullets').innerHTML = (d.reasoning_bullets || []).map(b => `<div class="bullet">${b}</div>`).join('');
            
            document.getElementById('model').textContent = d.model_version;
            document.getElementById('generated').textContent = new Date(d.generated_at).toLocaleString();
            document.getElementById('expires').textContent = new Date(d.expires_at).toLocaleString();
        }
        
        document.querySelectorAll('.assets').forEach(container => {
            container.addEventListener('click', e => {
                const btn = e.target.closest('.asset-btn');
                if (btn) load(btn.dataset.asset);
            });
        });
        
        load('BTC');
    </script>
</body>
</html>
