<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard | ELUXRAJ‚Ñ¢</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    :root {
      --bg: #0a0a0f;
      --card: #12121a;
      --border: #1e1e2e;
      --accent: #6366f1;
      --accent2: #8b5cf6;
      --green: #10b981;
      --red: #ef4444;
      --gold: #f59e0b;
      --text: #ffffff;
      --muted: #71717a;
    }
    body {
      font-family: 'Inter', -apple-system, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
    }
    
    /* Header */
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 24px;
      border-bottom: 1px solid var(--border);
      background: var(--card);
    }
    .logo {
      font-size: 20px;
      font-weight: 800;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    .user-badge {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .tier-badge {
      padding: 4px 12px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
    }
    
    /* Main Container */
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 24px;
    }
    
    /* Hero Section */
    .hero {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 24px;
      align-items: center;
      margin-bottom: 24px;
    }
    .hero-left h1 {
      font-size: 28px;
      margin-bottom: 4px;
    }
    .hero-left h1 span { color: var(--accent); }
    .hero-left p { color: var(--muted); }
    .portfolio-value {
      text-align: right;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 20px 32px;
    }
    .pv-amount {
      font-size: 36px;
      font-weight: 800;
    }
    .pv-change {
      color: var(--green);
      font-size: 14px;
    }
    
    /* Quick Actions Grid */
    .actions-section {
      margin-bottom: 24px;
    }
    .actions-section h3 {
      font-size: 14px;
      color: var(--muted);
      margin-bottom: 12px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .actions-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 12px;
    }
    .action-btn {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 20px 16px;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s;
      text-decoration: none;
      color: var(--text);
    }
    .action-btn:hover {
      border-color: var(--accent);
      transform: translateY(-2px);
    }
    .action-btn .icon {
      font-size: 24px;
    }
    .action-btn .label {
      font-size: 13px;
      font-weight: 600;
    }
    .action-btn.primary {
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      border: none;
    }
    .action-btn.gold {
      background: linear-gradient(135deg, #b45309, var(--gold));
      border: none;
    }
    .action-btn.green {
      background: linear-gradient(135deg, #047857, var(--green));
      border: none;
    }
    .action-btn.red {
      background: linear-gradient(135deg, #b91c1c, var(--red));
      border: none;
    }
    .action-btn.purple {
      background: linear-gradient(135deg, #6d28d9, #a855f7);
      border: none;
    }
    .action-btn.cyan {
      background: linear-gradient(135deg, #0e7490, #06b6d4);
      border: none;
    }
    .action-btn.gray {
      background: linear-gradient(135deg, #374151, #6b7280);
      border: none;
    }
    
    /* Market Data Grid */
    .market-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 16px;
      margin-bottom: 24px;
    }
    .market-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 20px;
    }
    .market-card .label {
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 8px;
    }
    .market-card .value {
      font-size: 24px;
      font-weight: 700;
    }
    .market-card .change {
      font-size: 14px;
      margin-top: 4px;
    }
    .market-card .change.up { color: var(--green); }
    .market-card .change.down { color: var(--red); }
    
    /* Tools Grid */
    .tools-section h3 {
      font-size: 14px;
      color: var(--muted);
      margin-bottom: 12px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .tools-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-bottom: 24px;
    }
    .tool-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 24px;
      cursor: pointer;
      transition: all 0.3s;
      text-align: center;
    }
    .tool-card:hover {
      border-color: var(--accent);
      transform: translateY(-3px);
    }
    .tool-card .icon {
      font-size: 32px;
      margin-bottom: 12px;
    }
    .tool-card .name {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 4px;
    }
    .tool-card .desc {
      font-size: 13px;
      color: var(--muted);
    }
    
    /* Modal */
    .modal-bg {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      backdrop-filter: blur(10px);
      z-index: 1000;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    .modal-bg.active { display: flex; }
    .modal {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 20px;
      width: 100%;
      max-width: 600px;
      max-height: 90vh;
      overflow: hidden;
    }
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 24px;
      border-bottom: 1px solid var(--border);
    }
    .modal-header h2 {
      font-size: 20px;
    }
    .modal-close {
      background: none;
      border: none;
      color: var(--muted);
      font-size: 24px;
      cursor: pointer;
    }
    .modal-body {
      padding: 24px;
      overflow-y: auto;
      max-height: calc(90vh - 70px);
    }
    .form-group { margin-bottom: 16px; }
    .form-label {
      display: block;
      margin-bottom: 6px;
      color: var(--muted);
      font-size: 13px;
    }
    .form-input, .form-select {
      width: 100%;
      padding: 12px 14px;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text);
      font-size: 15px;
    }
    .form-input:focus, .form-select:focus {
      outline: none;
      border-color: var(--accent);
    }
    .btn {
      padding: 14px 24px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      border: none;
      border-radius: 10px;
      color: white;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      transition: transform 0.3s;
    }
    .btn:hover { transform: translateY(-2px); }
    
    @media (max-width: 768px) {
      .hero { grid-template-columns: 1fr; }
      .portfolio-value { text-align: left; }
      .market-grid { grid-template-columns: repeat(2, 1fr); }
      .actions-grid { grid-template-columns: repeat(3, 1fr); }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">ELUXRAJ‚Ñ¢</div>
    <div class="user-badge">
      <span id="userName">Rob</span>
      <span class="tier-badge" id="userTier">ELITE</span>
    </div>
  </header>
  
  <div class="container">
    <!-- Hero -->
    <div class="hero">
      <div class="hero-left">
        <h1>Welcome, <span id="heroName">Rob</span> üëã</h1>
        <p>AI wealth intelligence ready</p>
      </div>
      <div class="portfolio-value">
        <div class="pv-amount">$127,482</div>
        <div class="pv-change">‚Üë +6.9% this month</div>
      </div>
    </div>
    
    <!-- AI Features -->
    <div class="actions-section">
      <h3>ü§ñ AI Intelligence Suite</h3>
      <div class="actions-grid">
        <div class="action-btn primary" onclick="openOracle()">
          <span class="icon">üîÆ</span>
          <span class="label">ORACLE</span>
        </div>
        <div class="action-btn green" onclick="openCouncil()">
          <span class="icon">üèõÔ∏è</span>
          <span class="label">COUNCIL</span>
        </div>
        <div class="action-btn red" onclick="openPulse()">
          <span class="icon">üíì</span>
          <span class="label">PULSE</span>
        </div>
        <div class="action-btn purple" onclick="openArchetype()">
          <span class="icon">üß†</span>
          <span class="label">ARCHETYPE</span>
        </div>
        <div class="action-btn cyan" onclick="openNexus()">
          <span class="icon">üåê</span>
          <span class="label">NEXUS</span>
        </div>
        <div class="action-btn gray" onclick="openMirror()">
          <span class="icon">ü™û</span>
          <span class="label">MIRROR</span>
        </div>
        <div class="action-btn gray" onclick="openPhantom()">
          <span class="icon">üëª</span>
          <span class="label">PHANTOM</span>
        </div>
        <div class="action-btn gold" onclick="openSovereign()">
          <span class="icon">üëë</span>
          <span class="label">SOVEREIGN</span>
        </div>
        <div class="action-btn cyan" onclick="openAtlas()">
          <span class="icon">üó∫Ô∏è</span>
          <span class="label">ATLAS</span>
        </div>
        <div class="action-btn primary" onclick="openFidelity()">
          <span class="icon">üì°</span>
          <span class="label">FIDELITY</span>
        </div>
        <div class="action-btn gold" onclick="openAttest()">
          <span class="icon">üìú</span>
          <span class="label">ATTEST</span>
        </div>
      </div>
    </div>
    
    <!-- Quick Actions -->
    <div class="actions-section">
      <h3>‚ö° Quick Actions</h3>
      <div class="actions-grid">
        <div class="action-btn" onclick="connectBrokerage()">
          <span class="icon">üîó</span>
          <span class="label">Connect Brokerage</span>
        </div>
        <div class="action-btn" onclick="openAlertModal()">
          <span class="icon">üîî</span>
          <span class="label">Set Alert</span>
        </div>
      </div>
    </div>
    
    <!-- Market Data -->
    <div class="market-grid">
      <div class="market-card">
        <div class="label">‚Çø BTC 24h</div>
        <div class="value">$91,434</div>
        <div class="change up">+0.2%</div>
      </div>
      <div class="market-card">
        <div class="label">üìà S&P 500</div>
        <div class="value">$599</div>
        <div class="change up">+0.3%</div>
      </div>
      <div class="market-card">
        <div class="label">ü™ô Gold</div>
        <div class="value">$4,174</div>
        <div class="change up">+0.1%</div>
      </div>
      <div class="market-card">
        <div class="label">üò± Fear/Greed</div>
        <div class="value">76</div>
        <div class="change">Extreme Greed</div>
      </div>
    </div>
    
    <!-- Pro Tools -->
    <div class="tools-section">
      <h3>üõ†Ô∏è Pro Tools</h3>
      <div class="tools-grid">
        <div class="tool-card" onclick="openPortfolioWizard()">
          <div class="icon">üßô</div>
          <div class="name">Portfolio Wizard</div>
          <div class="desc">AI allocation</div>
        </div>
        <div class="tool-card" onclick="openStockPicks()">
          <div class="icon">üìà</div>
          <div class="name">Stock Picks</div>
          <div class="desc">Top recommendations</div>
        </div>
        <div class="tool-card" onclick="openCrypto()">
          <div class="icon">‚Çø</div>
          <div class="name">Crypto Builder</div>
          <div class="desc">VC-backed tokens</div>
        </div>
        <div class="tool-card" onclick="openScanner()">
          <div class="icon">üîç</div>
          <div class="name">Market Scanner</div>
          <div class="desc">Find opportunities</div>
        </div>
        <div class="tool-card" onclick="openSignals()">
          <div class="icon">üìä</div>
          <div class="name">Trading Signals</div>
          <div class="desc">Entry & exit</div>
        </div>
        <div class="tool-card" onclick="openPositionSizer()">
          <div class="icon">üéØ</div>
          <div class="name">Position Sizer</div>
          <div class="desc">Risk management</div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Modal -->
  <div class="modal-bg" id="modalBg" onclick="if(event.target===this)closeModal()">
    <div class="modal">
      <div class="modal-header">
        <h2 id="mTitle">Modal Title</h2>
        <button class="modal-close" onclick="closeModal()">√ó</button>
      </div>
      <div class="modal-body" id="mBody">Content</div>
    </div>
  </div>
  
  <script src="https://cdn.plaid.com/link/v2/stable/link-initialize.js"></script>
  <script>
    // Load user data
    const user = JSON.parse(localStorage.getItem('eluxraj_user') || '{"name":"Guest","tier":"free"}');
    document.getElementById('userName').textContent = user.name;
    document.getElementById('heroName').textContent = user.name?.split(' ')[0] || 'Guest';
    document.getElementById('userTier').textContent = (user.tier || 'FREE').toUpperCase();
    
    function closeModal() {
      document.getElementById('modalBg').classList.remove('active');
    }
    
    // ORACLE‚Ñ¢
    async function openOracle() {
      const html = `
        <div class="form-group">
          <label class="form-label">Asset Symbol</label>
          <input class="form-input" id="oracleSymbol" value="BTC" placeholder="BTC, ETH, NVDA...">
        </div>
        <div class="form-group">
          <label class="form-label">Capital to Deploy ($)</label>
          <input class="form-input" id="oracleCapital" type="number" value="50000">
        </div>
        <button class="btn" onclick="runOracle()">üîÆ Run ORACLE Analysis</button>
        <div id="oracleResult" style="margin-top:20px"></div>
      `;
      document.getElementById('mTitle').textContent = 'üîÆ ORACLE‚Ñ¢ Predictive Engine';
      document.getElementById('mBody').innerHTML = html;
      document.getElementById('modalBg').classList.add('active');
    }
    
    async function runOracle() {
      const symbol = document.getElementById('oracleSymbol').value;
      const capital = document.getElementById('oracleCapital').value;
      document.getElementById('oracleResult').innerHTML = '<div style="color:var(--accent)">‚è≥ Synthesizing 3 AI models...</div>';
      
      const res = await fetch('/api/oracle-ai/synthesize/' + symbol + '?capital=' + capital);
      const data = await res.json();
      
      if (data.ok) {
        const o = data.oracle;
        const color = o.recommendation.includes('ACCUMULATE') ? 'var(--green)' : o.recommendation.includes('REDUCE') ? 'var(--red)' : 'var(--gold)';
        let html = '<div style="background:var(--bg);border-radius:12px;padding:20px;margin-top:15px">';
        html += '<h3 style="color:' + color + ';font-size:24px;margin-bottom:10px">' + o.recommendation + '</h3>';
        html += '<p style="margin-bottom:15px">' + o.action + '</p>';
        html += '<div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">';
        html += '<div style="background:var(--card);padding:12px;border-radius:8px"><div style="color:var(--muted);font-size:12px">Confidence</div><div style="font-size:20px;font-weight:bold">' + o.confidence + '%</div></div>';
        html += '<div style="background:var(--card);padding:12px;border-radius:8px"><div style="color:var(--muted);font-size:12px">Position Size</div><div style="font-size:20px;font-weight:bold;color:var(--green)">$' + o.position_size.toLocaleString() + '</div></div>';
        html += '</div></div>';
        document.getElementById('oracleResult').innerHTML = html;
      } else {
        document.getElementById('oracleResult').innerHTML = '<div style="color:var(--red)">Error: ' + data.error + '</div>';
      }
    }
    
    // COUNCIL‚Ñ¢
    async function openCouncil() {
      const html = `
        <div class="form-group">
          <label class="form-label">Investment Question</label>
          <textarea class="form-input" id="councilQ" rows="3" placeholder="Should I buy NVDA at current prices?">Should I accumulate BTC at $95,000?</textarea>
        </div>
        <button class="btn" onclick="runCouncil()">üèõÔ∏è Convene Council</button>
        <div id="councilResult" style="margin-top:20px"></div>
      `;
      document.getElementById('mTitle').textContent = 'üèõÔ∏è COUNCIL‚Ñ¢ AI Board';
      document.getElementById('mBody').innerHTML = html;
      document.getElementById('modalBg').classList.add('active');
    }
    
    async function runCouncil() {
      const question = document.getElementById('councilQ').value;
      document.getElementById('councilResult').innerHTML = '<div style="color:var(--accent)">‚è≥ 7 AI advisors debating...</div>';
      
      const res = await fetch('/api/council/convene', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ question })
      });
      const data = await res.json();
      
      if (data.ok) {
        const c = data.council;
        let html = '<div style="max-height:300px;overflow-y:auto;margin-top:15px">';
        c.advisors.forEach(a => {
          const color = a.stance === 'BUY' ? 'var(--green)' : a.stance === 'SELL' ? 'var(--red)' : 'var(--gold)';
          html += '<div style="background:var(--bg);padding:12px;border-radius:8px;margin-bottom:8px;border-left:3px solid ' + color + '">';
          html += '<div style="display:flex;justify-content:space-between"><strong>' + a.name + '</strong><span style="color:' + color + '">' + a.stance + '</span></div>';
          html += '<div style="font-size:13px;color:var(--muted);margin-top:4px">"' + a.opinion + '"</div>';
          html += '</div>';
        });
        html += '<div style="background:var(--accent);padding:15px;border-radius:10px;margin-top:15px;color:white">';
        html += '<strong>Synthesis:</strong> ' + c.synthesis.recommendation;
        html += '</div></div>';
        document.getElementById('councilResult').innerHTML = html;
      }
    }
    
    // PULSE‚Ñ¢
    async function openPulse() {
      document.getElementById('mTitle').textContent = 'üíì PULSE‚Ñ¢ Real-Time Feed';
      document.getElementById('mBody').innerHTML = '<div style="color:var(--accent)">‚è≥ Loading alpha signals...</div>';
      document.getElementById('modalBg').classList.add('active');
      
      const res = await fetch('/api/pulse/feed');
      const data = await res.json();
      
      if (data.ok) {
        let html = '<div style="max-height:400px;overflow-y:auto">';
        data.signals.forEach(s => {
          const icon = s.type === 'whale' ? 'üêã' : s.type === 'insider' ? 'üëî' : s.type === 'momentum' ? 'üìà' : '‚ö°';
          const color = s.sentiment === 'bullish' ? 'var(--green)' : s.sentiment === 'bearish' ? 'var(--red)' : 'var(--gold)';
          html += '<div style="background:var(--bg);padding:15px;border-radius:10px;margin-bottom:10px;border-left:3px solid ' + color + '">';
          html += '<div style="display:flex;justify-content:space-between"><span style="font-size:20px">' + icon + '</span><span style="color:var(--muted);font-size:12px">' + s.time + '</span></div>';
          html += '<div style="margin-top:8px">' + s.message + '</div>';
          html += '<div style="margin-top:5px;font-size:12px;color:' + color + '">' + s.impact + '</div>';
          html += '</div>';
        });
        html += '</div>';
        document.getElementById('mBody').innerHTML = html;
      }
    }
    
    // Placeholder functions for other features
    function openArchetype() { openGenericModal('üß† ARCHETYPE‚Ñ¢', 'Investor psychology profiling coming soon...'); }
    function openNexus() { openGenericModal('üåê NEXUS‚Ñ¢', 'Capital flow detection coming soon...'); }
    function openMirror() { openGenericModal('ü™û MIRROR‚Ñ¢', 'Portfolio stress testing coming soon...'); }
    function openPhantom() { openGenericModal('üëª PHANTOM‚Ñ¢', 'Stealth execution coming soon...'); }
    function openSovereign() { openGenericModal('üëë SOVEREIGN‚Ñ¢', 'Private deal matching coming soon...'); }
    function openAtlas() { openGenericModal('üó∫Ô∏è ATLAS‚Ñ¢', 'Asset graph intelligence coming soon...'); }
    function openFidelity() { openGenericModal('üì° FIDELITY‚Ñ¢', 'Data pipeline status coming soon...'); }
    function openAttest() { openGenericModal('üìú ATTEST‚Ñ¢', 'Provenance certificates coming soon...'); }
    
    function openPortfolioWizard() {
      const html = `
        <div class="form-group">
          <label class="form-label">Amount ($)</label>
          <input class="form-input" id="wizAmount" type="number" value="100000">
        </div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
          <div class="form-group">
            <label class="form-label">Time Horizon</label>
            <select class="form-select" id="wizTime">
              <option value="1-3 yrs">1-3 years</option>
              <option value="5-10 yrs" selected>5-10 years</option>
              <option value="10+ yrs">10+ years</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Risk (1-10)</label>
            <input class="form-input" id="wizRisk" type="number" value="7" min="1" max="10">
          </div>
        </div>
        <button class="btn" onclick="runWizard()">‚ú® Build Portfolio</button>
        <div id="wizResult" style="margin-top:20px"></div>
      `;
      document.getElementById('mTitle').textContent = 'üßô Portfolio Wizard';
      document.getElementById('mBody').innerHTML = html;
      document.getElementById('modalBg').classList.add('active');
    }
    
    async function runWizard() {
      document.getElementById('wizResult').innerHTML = '<div style="color:var(--accent)">‚è≥ Building your portfolio...</div>';
      const res = await fetch('/api/ai/portfolio-wizard', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          portfolioValue: document.getElementById('wizAmount').value,
          timeHorizon: document.getElementById('wizTime').value,
          riskTolerance: document.getElementById('wizRisk').value
        })
      });
      const data = await res.json();
      if (data.ok) {
        document.getElementById('wizResult').innerHTML = '<div style="background:var(--bg);padding:20px;border-radius:12px;white-space:pre-wrap;font-size:14px;max-height:400px;overflow-y:auto">' + data.analysis + '</div>';
      }
    }
    
    function openStockPicks() { openGenericModal('üìà Stock Picks', 'Loading...'); }
    function openCrypto() { openGenericModal('‚Çø Crypto Builder', 'Loading...'); }
    function openScanner() { openGenericModal('üîç Market Scanner', 'Loading...'); }
    function openSignals() { openGenericModal('üìä Trading Signals', 'Loading...'); }
    function openPositionSizer() { openGenericModal('üéØ Position Sizer', 'Loading...'); }
    
    function openGenericModal(title, content) {
      document.getElementById('mTitle').textContent = title;
      document.getElementById('mBody').innerHTML = '<div style="text-align:center;padding:40px;color:var(--muted)">' + content + '</div>';
      document.getElementById('modalBg').classList.add('active');
    }
    
    // Connect Brokerage
    async function connectBrokerage() {
      document.getElementById('mTitle').textContent = 'üîó Connect Brokerage';
      document.getElementById('mBody').innerHTML = '<div style="color:var(--accent)">‚è≥ Initializing Plaid...</div>';
      document.getElementById('modalBg').classList.add('active');
      
      const token = localStorage.getItem('eluxraj_token');
      const res = await fetch('/api/plaid/create-link-token', {
        method: 'POST',
        headers: { 'Authorization': 'Bearer ' + token }
      });
      const data = await res.json();
      
      if (data.ok) {
        const handler = Plaid.create({
          token: data.link_token,
          onSuccess: (public_token) => {
            alert('Account connected successfully!');
            closeModal();
          },
          onExit: () => closeModal()
        });
        handler.open();
      } else {
        document.getElementById('mBody').innerHTML = '<div style="color:var(--red)">Error: ' + data.error + '</div>';
      }
    }
    
    // Set Alert
    function openAlertModal() {
      const html = `
        <div class="form-group">
          <label class="form-label">Symbol</label>
          <input class="form-input" id="alertSymbol" value="BTC" placeholder="BTC, NVDA...">
        </div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
          <div class="form-group">
            <label class="form-label">Target Price ($)</label>
            <input class="form-input" id="alertPrice" type="number" value="100000">
          </div>
          <div class="form-group">
            <label class="form-label">Direction</label>
            <select class="form-select" id="alertDir">
              <option value="above">Above üìà</option>
              <option value="below">Below üìâ</option>
            </select>
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">üì± Phone (for SMS)</label>
          <input class="form-input" id="alertPhone" placeholder="+1234567890">
        </div>
        <button class="btn" onclick="createAlert()">üîî Set Alert</button>
        <div id="alertResult" style="margin-top:15px"></div>
      `;
      document.getElementById('mTitle').textContent = 'üîî Set Price Alert';
      document.getElementById('mBody').innerHTML = html;
      document.getElementById('modalBg').classList.add('active');
    }
    
    async function createAlert() {
      const token = localStorage.getItem('eluxraj_token');
      const data = {
        symbol: document.getElementById('alertSymbol').value,
        targetPrice: document.getElementById('alertPrice').value,
        direction: document.getElementById('alertDir').value,
        alertType: 'sms',
        phone: document.getElementById('alertPhone').value
      };
      
      const res = await fetch('/api/alerts', {
        method: 'POST',
        headers: { 'Authorization': 'Bearer ' + token, 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });
      const result = await res.json();
      
      document.getElementById('alertResult').innerHTML = result.ok 
        ? '<div style="color:var(--green)">‚úÖ Alert created!</div>'
        : '<div style="color:var(--red)">‚ùå ' + result.error + '</div>';
    }
  </script>
</body>
</html>
