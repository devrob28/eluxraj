<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard | ELUXRAJ</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root{--bg:#0a0a0f;--bg2:#12121a;--card:#1a1a24;--purple:#7c3aed;--cyan:#06b6d4;--green:#10b981;--red:#ef4444;--yellow:#f59e0b;--white:#fff;--gray300:#d1d5db;--gray400:#9ca3af;--gray500:#6b7280}
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--white);min-height:100vh}
        
        /* Header */
        .header{display:flex;justify-content:space-between;align-items:center;padding:16px 32px;border-bottom:1px solid rgba(124,58,237,0.2)}
        .logo{font-size:1.25rem;font-weight:900;background:linear-gradient(135deg,var(--purple),var(--cyan));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
        .user-info{display:flex;align-items:center;gap:16px}
        .username{font-weight:600}
        .tier-badge{font-size:.7rem;font-weight:700;padding:4px 10px;border-radius:20px;text-transform:uppercase}
        .tier-badge.free{background:rgba(107,114,128,0.2);color:var(--gray400)}
        .tier-badge.pro{background:rgba(124,58,237,0.2);color:var(--purple)}
        .tier-badge.elite{background:linear-gradient(135deg,var(--purple),var(--cyan));color:var(--white)}
        .logout-btn{background:transparent;border:1px solid rgba(255,255,255,0.1);color:var(--gray400);padding:8px 16px;border-radius:8px;cursor:pointer;font-size:.85rem}
        .logout-btn:hover{border-color:var(--purple);color:var(--white)}
        
        /* Container */
        .container{max-width:1200px;margin:0 auto;padding:32px}
        
        /* Upgrade Banner */
        .upgrade-banner{background:var(--card);border:1px solid var(--purple);border-radius:16px;padding:24px 32px;display:flex;justify-content:space-between;align-items:center;margin-bottom:32px}
        .upgrade-text h3{font-size:1.1rem;font-weight:700;margin-bottom:4px}
        .upgrade-text p{color:var(--gray400);font-size:.9rem}
        .upgrade-btn{background:linear-gradient(135deg,var(--purple),var(--cyan));color:var(--white);font-weight:700;padding:12px 24px;border-radius:10px;text-decoration:none;font-size:.9rem;transition:transform .2s}
        .upgrade-btn:hover{transform:translateY(-2px)}
        
        /* Market Cards */
        .market-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:40px}
        @media(max-width:900px){.market-grid{grid-template-columns:repeat(2,1fr)}}
        @media(max-width:500px){.market-grid{grid-template-columns:1fr}}
        .market-card{background:var(--card);border:1px solid rgba(124,58,237,0.15);border-radius:16px;padding:20px}
        .market-label{font-size:.8rem;color:var(--gray500);margin-bottom:8px;display:flex;align-items:center;gap:6px}
        .market-value{font-family:'JetBrains Mono',monospace;font-size:1.5rem;font-weight:700;margin-bottom:4px}
        .market-change{font-size:.85rem;font-weight:600}
        .market-change.up{color:var(--green)}
        .market-change.down{color:var(--red)}
        
        /* Section */
        .section-title{font-size:.85rem;color:var(--gray500);text-transform:uppercase;letter-spacing:1px;margin-bottom:16px;display:flex;align-items:center;gap:8px}
        
        /* Feature Grid */
        .feature-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-bottom:40px}
        @media(max-width:700px){.feature-grid{grid-template-columns:1fr}}
        .feature-card{background:var(--card);border:1px solid rgba(124,58,237,0.15);border-radius:16px;padding:24px;cursor:pointer;transition:all .2s;text-decoration:none;color:var(--white)}
        .feature-card:hover{border-color:var(--purple);transform:translateY(-2px)}
        .feature-card.oracle{background:linear-gradient(135deg,rgba(124,58,237,0.2),rgba(6,182,212,0.1));border-color:var(--purple)}
        .feature-card.chart{background:linear-gradient(135deg,rgba(16,185,129,0.2),rgba(6,182,212,0.1));border-color:var(--green)}
        .feature-icon{font-size:2.5rem;margin-bottom:12px}
        .feature-name{font-size:1.1rem;font-weight:700;margin-bottom:4px}
        .feature-desc{font-size:.85rem;color:var(--gray400)}
        .feature-badge{display:inline-block;font-size:.65rem;font-weight:700;padding:3px 8px;border-radius:4px;margin-left:8px;text-transform:uppercase}
        .feature-badge.elite{background:linear-gradient(135deg,var(--purple),var(--cyan));color:var(--white)}
        .feature-badge.pro{background:rgba(124,58,237,0.2);color:var(--purple)}
        
        /* Quick Actions */
        .actions-grid{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:40px}
        .action-btn{background:var(--card);border:1px solid rgba(124,58,237,0.15);border-radius:12px;padding:14px 20px;font-size:.9rem;color:var(--gray300);cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:8px;text-decoration:none}
        .action-btn:hover{border-color:var(--purple);color:var(--white)}
        
        /* Tools Grid */
        .tools-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
        @media(max-width:800px){.tools-grid{grid-template-columns:repeat(2,1fr)}}
        .tool-card{background:var(--card);border:1px solid rgba(124,58,237,0.15);border-radius:12px;padding:20px;text-align:center;cursor:pointer;transition:all .2s;text-decoration:none;color:var(--white)}
        .tool-card:hover{border-color:var(--purple)}
        .tool-icon{font-size:1.5rem;margin-bottom:8px}
        .tool-name{font-size:.85rem;font-weight:600}
    </style>
</head>
<body>
    <header class="header">
        <div class="logo">ELUXRAJ‚Ñ¢</div>
        <div class="user-info">
            <span class="username" id="username">User</span>
            <span class="tier-badge free" id="tierBadge">FREE</span>
            <button class="logout-btn" onclick="logout()">Logout</button>
        </div>
    </header>
    
    <main class="container">
        <!-- Upgrade Banner (shown for non-Elite users) -->
        <div class="upgrade-banner" id="upgradeBanner">
            <div class="upgrade-text">
                <h3>üöÄ Unlock All AI Features</h3>
                <p>Upgrade to Elite for ORACLE predictions, whale alerts, and more</p>
            </div>
            <a href="/pricing.html" class="upgrade-btn">Upgrade to Elite - $98/mo</a>
        </div>
        
        <!-- Market Overview -->
        <div class="market-grid">
            <div class="market-card">
                <div class="market-label">‚Çø Bitcoin</div>
                <div class="market-value" id="btcPrice">$--</div>
                <div class="market-change up" id="btcChange">--%</div>
            </div>
            <div class="market-card">
                <div class="market-label">üìà S&P 500</div>
                <div class="market-value" id="spxPrice">$--</div>
                <div class="market-change up" id="spxChange">--%</div>
            </div>
            <div class="market-card">
                <div class="market-label">ü•á Gold</div>
                <div class="market-value" id="goldPrice">$--</div>
                <div class="market-change up" id="goldChange">--%</div>
            </div>
            <div class="market-card">
                <div class="market-label">üò± Fear & Greed</div>
                <div class="market-value" id="fngValue">--</div>
                <div class="market-change" id="fngLabel">Loading...</div>
            </div>
        </div>
        
        <!-- AI Intelligence Suite -->
        <div class="section-title">ü§ñ AI INTELLIGENCE SUITE</div>
        <div class="feature-grid">
            <a href="/oracle.html" class="feature-card oracle">
                <div class="feature-icon">üîÆ</div>
                <div class="feature-name">ORACLE <span class="feature-badge elite">Elite</span></div>
                <div class="feature-desc">AI-powered predictions with whale tracking, liquidation zones, and smart entry points</div>
            </a>
            <a href="/chart-analysis.html" class="feature-card chart">
                <div class="feature-icon">üìä</div>
                <div class="feature-name">CHART AI <span class="feature-badge pro">Pro</span></div>
                <div class="feature-desc">Upload any chart and get instant AI pattern analysis with entry/exit signals</div>
            </a>
        </div>
        
        <!-- Quick Actions -->
        <div class="section-title">‚ö° QUICK ACTIONS</div>
        <div class="actions-grid">
            <a href="#" class="action-btn">üîó Connect Brokerage</a>
            <a href="#" class="action-btn">üîî Set Price Alert</a>
            <a href="#" class="action-btn">ü™Ñ Portfolio Wizard</a>
        </div>
        
        <!-- Pro Tools -->
        <div class="section-title">‚ú® PRO TOOLS</div>
        <div class="tools-grid">
            <a href="/signals.html" class="tool-card">
                <div class="tool-icon">üì°</div>
                <div class="tool-name">Signals</div>
            </a>
            <a href="/track" class="tool-card">
                <div class="tool-icon">üìà</div>
                <div class="tool-name">Track Record</div>
            </a>
            <a href="/screener.html" class="tool-card">
                <div class="tool-icon">üîç</div>
                <div class="tool-name">Screener</div>
            </a>
            <a href="/watchlist.html" class="tool-card">
                <div class="tool-icon">üëÅÔ∏è</div>
                <div class="tool-name">Watchlist</div>
            </a>
        </div>
    </main>
    
    <script>
        // Check auth
        const token = localStorage.getItem('token');
        if (!token) {
            window.location.href = '/login.html';
        }
        
        // Load user info
        async function loadUser() {
            try {
                const res = await fetch('/api/v1/users/me', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                if (!res.ok) throw new Error('Not authenticated');
                const user = await res.json();
                
                document.getElementById('username').textContent = user.username || user.email;
                const badge = document.getElementById('tierBadge');
                badge.textContent = (user.subscription_tier || 'free').toUpperCase();
                badge.className = 'tier-badge ' + (user.subscription_tier || 'free');
                
                // Hide upgrade banner for Elite users
                if (user.subscription_tier === 'elite' || user.subscription_tier === 'admin') {
                    document.getElementById('upgradeBanner').style.display = 'none';
                }
            } catch (e) {
                console.error(e);
                localStorage.removeItem('token');
                window.location.href = '/login.html';
            }
        }
        
        // Load market data
        async function loadMarkets() {
            try {
                // Bitcoin
                const btcRes = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd&include_24hr_change=true');
                const btc = await btcRes.json();
                document.getElementById('btcPrice').textContent = '$' + btc.bitcoin.usd.toLocaleString();
                const btcChange = btc.bitcoin.usd_24h_change;
                document.getElementById('btcChange').textContent = (btcChange > 0 ? '+' : '') + btcChange.toFixed(1) + '%';
                document.getElementById('btcChange').className = 'market-change ' + (btcChange >= 0 ? 'up' : 'down');
                
                // Gold
                const goldRes = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=tether-gold&vs_currencies=usd&include_24hr_change=true');
                const gold = await goldRes.json();
                if (gold['tether-gold']) {
                    document.getElementById('goldPrice').textContent = '$' + gold['tether-gold'].usd.toLocaleString();
                    const goldChange = gold['tether-gold'].usd_24h_change || 0;
                    document.getElementById('goldChange').textContent = (goldChange > 0 ? '+' : '') + goldChange.toFixed(1) + '%';
                    document.getElementById('goldChange').className = 'market-change ' + (goldChange >= 0 ? 'up' : 'down');
                }
                
                // Fear & Greed
                const fngRes = await fetch('https://api.alternative.me/fng/?limit=1');
                const fng = await fngRes.json();
                if (fng.data && fng.data[0]) {
                    document.getElementById('fngValue').textContent = fng.data[0].value;
                    document.getElementById('fngLabel').textContent = fng.data[0].value_classification;
                }
                
                // S&P 500 placeholder (would need real API)
                document.getElementById('spxPrice').textContent = '$5,990';
                document.getElementById('spxChange').textContent = '+0.3%';
                
            } catch (e) {
                console.error('Market data error:', e);
            }
        }
        
        function logout() {
            localStorage.removeItem('token');
            window.location.href = '/login.html';
        }
        
        loadUser();
        loadMarkets();
    </script>
</body>
</html>
