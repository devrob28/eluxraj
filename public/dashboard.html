<!DOCTYPE html>
<html lang="en">
<head>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-D5GE28P625"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag("js", new Date());
  gtag("config", "G-D5GE28P625");
</script>
  <!-- PWA Meta Tags -->
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#6366f1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="ELUXRAJ">
  <link rel="apple-touch-icon" href="/icons/icon-192-v2.png">

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard | ELUXRAJ‚Ñ¢</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    :root {
      --bg: #000000;
      --card: #0a0a0f;
      --card2: #111118;
      --border: #1a1a2e;
      --accent: #6366f1;
      --accent2: #8b5cf6;
      --green: #10b981;
      --red: #ef4444;
      --gold: #f59e0b;
      --text: #ffffff;
      --muted: #71717a;
    }
    body {
      font-family: 'Inter', -apple-system, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
    }
    
    /* Header */
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 24px;
      border-bottom: 1px solid var(--border);
      background: var(--card);
      position: sticky;
      top: 0;
      z-index: 100;
    }
    .logo {
      font-size: 20px;
      font-weight: 800;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    .user-info {
      display: flex;
      align-items: center;
      gap: 16px;
    }
    .user-name {
      font-weight: 600;
      font-size: 14px;
    }
    .tier-badge {
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .tier-free { background: var(--border); color: var(--muted); }
    .tier-pro { background: linear-gradient(135deg, var(--accent), var(--accent2)); color: white; }
    .tier-elite { background: linear-gradient(135deg, var(--gold), #fbbf24); color: black; }
    .logout-btn {
      padding: 8px 16px;
      background: transparent;
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--muted);
      font-size: 13px;
      cursor: pointer;
      transition: all 0.3s;
    }
    .logout-btn:hover {
      border-color: var(--red);
      color: var(--red);
    }
    
    /* Container */
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 24px;
    }
    
    /* Welcome Section */
    .welcome {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 32px;
      flex-wrap: wrap;
      gap: 20px;
    }
    .welcome-text h1 {
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 4px;
    }
    .welcome-text h1 span { color: var(--accent); }
    .welcome-text p { color: var(--muted); font-size: 14px; }
    .portfolio-card {
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      border-radius: 16px;
      padding: 24px 32px;
      text-align: right;
    }
    .portfolio-label { font-size: 12px; opacity: 0.8; }
    .portfolio-value { font-size: 32px; font-weight: 800; }
    .portfolio-change { font-size: 14px; color: #86efac; }
    
    /* Market Cards */
    .market-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 16px;
      margin-bottom: 32px;
    }
    .market-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 20px;
      transition: border-color 0.3s;
    }
    .market-card:hover { border-color: var(--accent); }
    .market-label {
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .market-value {
      font-size: 24px;
      font-weight: 700;
    }
    .market-change {
      font-size: 14px;
      margin-top: 4px;
    }
    .market-change.up { color: var(--green); }
    .market-change.down { color: var(--red); }
    
    /* Section Title */
    .section-title {
      font-size: 13px;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    /* AI Features Grid */
    .ai-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 12px;
      margin-bottom: 32px;
    }
    .ai-btn {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 24px 16px;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      cursor: pointer;
      transition: all 0.3s;
      text-decoration: none;
      color: var(--text);
    }
    .ai-btn:hover {
      border-color: var(--accent);
      transform: translateY(-3px);
      box-shadow: 0 10px 40px rgba(99,102,241,0.1);
    }
    .ai-btn .icon { font-size: 32px; }
    .ai-btn .label { font-size: 13px; font-weight: 600; }
    .ai-btn.locked {
      opacity: 0.5;
      cursor: not-allowed;
    }
    .ai-btn.locked:hover {
      transform: none;
      border-color: var(--border);
    }
    .lock-icon {
      font-size: 10px;
      background: var(--gold);
      color: black;
      padding: 2px 6px;
      border-radius: 4px;
      font-weight: 700;
    }
    
    /* Tools Grid */
    .tools-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 16px;
      margin-bottom: 32px;
    }
    .tool-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 24px;
      cursor: pointer;
      transition: all 0.3s;
      text-align: center;
    }
    .tool-card:hover {
      border-color: var(--accent);
      transform: translateY(-3px);
    }
    .tool-card .icon { font-size: 36px; margin-bottom: 12px; }
    .tool-card .name { font-size: 16px; font-weight: 600; margin-bottom: 4px; }
    .tool-card .desc { font-size: 13px; color: var(--muted); }
    
    /* Quick Actions */
    .quick-actions {
      display: flex;
      gap: 12px;
      margin-bottom: 32px;
      flex-wrap: wrap;
    }
    .quick-btn {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px 20px;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 10px;
      color: var(--text);
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s;
    }
    .quick-btn:hover {
      border-color: var(--accent);
      background: rgba(99,102,241,0.1);
    }
    
    /* Modal */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.85);
      backdrop-filter: blur(10px);
      z-index: 1000;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    .modal-overlay.active { display: flex; }
    .modal {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 20px;
      width: 100%;
      max-width: 600px;
      max-height: 90vh;
      overflow: hidden;
      animation: modalIn 0.3s ease;
    }
    @keyframes modalIn {
      from { opacity: 0; transform: scale(0.95) translateY(20px); }
      to { opacity: 1; transform: scale(1) translateY(0); }
    }
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 24px;
      border-bottom: 1px solid var(--border);
    }
    .modal-header h2 {
      font-size: 18px;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .modal-close {
      width: 36px;
      height: 36px;
      border-radius: 10px;
      background: var(--card2);
      border: 1px solid var(--border);
      color: var(--muted);
      font-size: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
    }
    .modal-close:hover {
      background: var(--red);
      border-color: var(--red);
      color: white;
    }
    .modal-body {
      padding: 24px;
      overflow-y: auto;
      max-height: calc(90vh - 80px);
    }
    
    /* Form Styles */
    .form-group { margin-bottom: 16px; }
    .form-label {
      display: block;
      font-size: 13px;
      color: var(--muted);
      margin-bottom: 6px;
    }
    .form-input, .form-select, .form-textarea {
      width: 100%;
      padding: 12px 16px;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 10px;
      color: var(--text);
      font-size: 15px;
      font-family: inherit;
      transition: border-color 0.3s;
    }
    .form-input:focus, .form-select:focus, .form-textarea:focus {
      outline: none;
      border-color: var(--accent);
    }
    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    .btn {
      width: 100%;
      padding: 14px 24px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      border: none;
      border-radius: 10px;
      color: white;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    .btn:hover { transform: translateY(-2px); box-shadow: 0 10px 40px rgba(99,102,241,0.3); }
    .btn:disabled { opacity: 0.7; cursor: not-allowed; transform: none; }
    .btn.secondary {
      background: var(--card2);
      border: 1px solid var(--border);
    }
    
    /* Loading Spinner */
    .spinner {
      width: 20px;
      height: 20px;
      border: 2px solid rgba(255,255,255,0.3);
      border-top-color: white;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
    
    /* Result Cards */
    .result-card {
      background: var(--card2);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 20px;
      margin-top: 16px;
    }
    .result-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }
    .result-title {
      font-size: 18px;
      font-weight: 700;
    }
    .result-badge {
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 700;
    }
    .badge-green { background: rgba(16,185,129,0.2); color: var(--green); }
    .badge-red { background: rgba(239,68,68,0.2); color: var(--red); }
    .badge-gold { background: rgba(245,158,11,0.2); color: var(--gold); }
    .badge-purple { background: rgba(139,92,246,0.2); color: var(--accent2); }
    .result-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }
    .result-item {
      background: var(--bg);
      border-radius: 10px;
      padding: 14px;
    }
    .result-item-label {
      font-size: 11px;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 4px;
    }
    .result-item-value {
      font-size: 20px;
      font-weight: 700;
    }
    
    /* Advisor Cards */
    .advisor-card {
      background: var(--bg);
      border-radius: 10px;
      padding: 14px;
      margin-bottom: 10px;
      border-left: 3px solid var(--border);
    }
    .advisor-card.buy { border-left-color: var(--green); }
    .advisor-card.sell { border-left-color: var(--red); }
    .advisor-card.hold { border-left-color: var(--gold); }
    .advisor-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }
    .advisor-name { font-weight: 600; }
    .advisor-stance {
      font-size: 12px;
      font-weight: 700;
      padding: 2px 8px;
      border-radius: 4px;
    }
    .advisor-opinion {
      font-size: 13px;
      color: var(--muted);
      font-style: italic;
    }
    
    /* Signal Cards */
    .signal-card {
      background: var(--bg);
      border-radius: 10px;
      padding: 16px;
      margin-bottom: 10px;
      border-left: 3px solid var(--border);
    }
    .signal-card.bullish { border-left-color: var(--green); }
    .signal-card.bearish { border-left-color: var(--red); }
    .signal-card.neutral { border-left-color: var(--gold); }
    .signal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }
    .signal-type { font-size: 24px; }
    .signal-time { font-size: 11px; color: var(--muted); }
    .signal-message { font-size: 14px; margin-bottom: 6px; }
    .signal-impact { font-size: 12px; font-weight: 600; }
    
    /* Upgrade Banner */
    .upgrade-banner {
      background: linear-gradient(135deg, rgba(99,102,241,0.2), rgba(139,92,246,0.2));
      border: 1px solid var(--accent);
      border-radius: 16px;
      padding: 24px;
      margin-bottom: 32px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 16px;
    }
    .upgrade-text h3 { font-size: 18px; margin-bottom: 4px; }
    .upgrade-text p { color: var(--muted); font-size: 14px; }
    .upgrade-btn {
      padding: 12px 24px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      border: none;
      border-radius: 10px;
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }
    .upgrade-btn:hover { transform: translateY(-2px); }
    
    /* Responsive */
    @media (max-width: 900px) {
      .market-grid { grid-template-columns: repeat(2, 1fr); }
      .welcome { flex-direction: column; align-items: flex-start; }
      .portfolio-card { width: 100%; text-align: left; }
    }
    @media (max-width: 600px) {
      .ai-grid { grid-template-columns: repeat(3, 1fr); }
      .form-row { grid-template-columns: 1fr; }
      .result-grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">ELUXRAJ‚Ñ¢</div>
    <div class="user-info">
      <span class="user-name" id="userName">Loading...</span>
      <span class="tier-badge tier-free" id="userTier">FREE</span>
      <button class="logout-btn" onclick="logout()">Logout</button>
    </div>
  </header>
  
  <div class="container">
    <!-- Welcome -->
    <div class="welcome">
      <div class="welcome-text">
        <h1>Welcome back, <span id="userFirstName">Investor</span> üëã</h1>
        <p>Your AI wealth intelligence is ready</p>
      </div>
      <div class="portfolio-card">
        <div class="portfolio-label">Portfolio Value</div>
        <div class="portfolio-value">$127,482</div>
        <div class="portfolio-change">‚Üë +6.9% this month</div>
      </div>
    </div>
    
    <!-- Upgrade Banner (for free users) -->
    <div class="upgrade-banner" id="upgradeBanner" style="display:none;">
      <div class="upgrade-text">
        <h3>üöÄ Unlock All AI Features</h3>
        <p>Upgrade to Pro for unlimited queries, COUNCIL‚Ñ¢, PULSE‚Ñ¢, and more</p>
      </div>
      <button class="upgrade-btn" onclick="window.location.href='/#pricing'">Upgrade to Pro - $53/mo</button>
    </div>
    
    <!-- Market Data -->
    <div class="market-grid" id="marketGrid">
      <div class="market-card">
        <div class="market-label">‚Çø Bitcoin</div>
        <div class="market-value" id="btcPrice">--</div>
        <div class="market-change up" id="btcChange">--</div>
      </div>
      <div class="market-card">
        <div class="market-label">üìà S&P 500</div>
        <div class="market-value" id="spyPrice">--</div>
        <div class="market-change up" id="spyChange">--</div>
      </div>
      <div class="market-card">
        <div class="market-label">ü™ô Gold</div>
        <div class="market-value" id="goldPrice">--</div>
        <div class="market-change up" id="goldChange">--</div>
      </div>
      <div class="market-card">
        <div class="market-label">üò± Fear & Greed</div>
        <div class="market-value" id="fgValue">--</div>
        <div class="market-change" id="fgLabel">--</div>
      </div>
    </div>
    
    
    
    <!-- Upgrade Banner -->
    <div id="upgradeBanner" class="section" style="margin-bottom:32px;display:none">
      <div style="background:linear-gradient(135deg,rgba(99,102,241,0.15),rgba(139,92,246,0.15));border:1px solid rgba(99,102,241,0.3);border-radius:20px;padding:32px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:20px">
        <div>
          <div style="font-size:24px;font-weight:700;margin-bottom:8px">Unlock Premium Features</div>
          <div style="color:#a1a1aa">Get unlimited AI queries, ORACLE full suite, real-time alerts & more</div>
        </div>
        <a href="/pricing.html" style="padding:14px 32px;background:linear-gradient(135deg,#6366f1,#8b5cf6);border-radius:12px;color:white;font-weight:600;text-decoration:none;white-space:nowrap">Upgrade to Pro ‚Üí</a>
      </div>
    </div>

    <!-- Current Plan Badge -->
    <script>
      (function() {
        const user = JSON.parse(localStorage.getItem('eluxraj_user') || '{}');
        const banner = document.getElementById('upgradeBanner');
        if (user.tier === 'free' || !user.tier) {
          banner.style.display = 'block';
        }
      })();
    </script>

<!-- Premium Features -->
    <div class="section" style="margin-bottom:32px">
      <h2 style="margin-bottom:20px">üé© Premium Suite</h2>
      <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px">
        <a href="/magician.html" style="background:linear-gradient(135deg,rgba(99,102,241,0.2),rgba(139,92,246,0.2));border:1px solid rgba(99,102,241,0.3);border-radius:16px;padding:24px;text-decoration:none;color:inherit;transition:all 0.3s;display:block">
          <div style="font-size:32px;margin-bottom:12px">üé©</div>
          <div style="font-size:16px;font-weight:700;margin-bottom:4px">MAGICIAN</div>
          <div style="font-size:12px;color:#71717a">AI Trading Signals</div>
        </a>
        <a href="/conviction.html" style="background:linear-gradient(135deg,rgba(16,185,129,0.1),rgba(52,211,153,0.1));border:1px solid rgba(16,185,129,0.3);border-radius:16px;padding:24px;text-decoration:none;color:inherit;transition:all 0.3s;display:block">
          <div style="font-size:32px;margin-bottom:12px">üèÜ</div>
          <div style="font-size:16px;font-weight:700;margin-bottom:4px">CONVICTION</div>
          <div style="font-size:12px;color:#71717a">Leaderboard</div>
        </a>
      </div>
    </div>
    <div class="quick-actions">
      <button class="quick-btn" onclick="openModal('brokerage')">üîó Connect Brokerage</button>
      <button class="quick-btn" onclick="openModal('alert')">üîî Set Price Alert</button>
      <button class="quick-btn" onclick="openModal('wizard')">üßô Portfolio Wizard</button>
    </div>
    
    <!-- AI Features -->
    <div class="section-title">ü§ñ AI Intelligence Suite</div>
    <div class="ai-grid">
      <div class="ai-btn" onclick="openModal('oracle')">
        <span class="icon">üîÆ</span>
        <span class="label">ORACLE</span>
      </div>
      <a href="/chart-analysis.html" class="ai-btn" style="text-decoration:none;color:inherit">
        <span class="icon">üìä</span>
        <span class="label">CHART AI</span>
      </a>
    </div>
    
    <!-- Pro Tools -->
    <div class="section-title">üõ†Ô∏è Pro Tools</div>
    <div class="tools-grid">
      <div class="tool-card" onclick="openModal('wizard')">
        <div class="icon">üßô</div>
        <div class="name">Portfolio Wizard</div>
        <div class="desc">AI-powered allocation</div>
      </div>
      <div class="tool-card" onclick="openModal('scanner')">
        <div class="icon">üîç</div>
        <div class="name">Market Scanner</div>
        <div class="desc">Find opportunities</div>
      </div>
      <div class="tool-card" onclick="openModal('signals')">
        <div class="icon">üìä</div>
        <div class="name">Trading Signals</div>
        <div class="desc">Entry & exit points</div>
      </div>
      <div class="tool-card" onclick="openModal('sizer')">
        <div class="icon">üéØ</div>
        <div class="name">Position Sizer</div>
        <div class="desc">Risk management</div>
      </div>
    </div>
  </div>
  
  <!-- Modal -->
  <div class="modal-overlay" id="modalOverlay" onclick="if(event.target===this)closeModal()">
    <div class="modal">
      <div class="modal-header">
        <h2 id="modalTitle">Modal Title</h2>
        <button class="modal-close" onclick="closeModal()">√ó</button>
      </div>
      <div class="modal-body" id="modalBody">Content</div>
    </div>
  </div>
  
  <script>
    // User data
    let user = null;
    const token = localStorage.getItem('eluxraj_token');
    
    // Check auth
    if (!token) {
      window.location.href = '/login.html';
    } else {
      user = JSON.parse(localStorage.getItem('eluxraj_user') || '{}');
      document.getElementById('userName').textContent = user.name || 'User';
      document.getElementById('userFirstName').textContent = (user.name || 'Investor').split(' ')[0];
      
      const tier = (user.tier || 'free').toUpperCase();
      const tierEl = document.getElementById('userTier');
      tierEl.textContent = tier;
      tierEl.className = 'tier-badge tier-' + (user.tier || 'free');
      
      // Show upgrade banner for free users
      if (user.tier === 'free' || !user.tier) {
        document.getElementById('upgradeBanner').style.display = 'flex';
      }
    }
    
    // Logout
    function logout() {
      localStorage.removeItem('eluxraj_token');
      localStorage.removeItem('eluxraj_user');
      window.location.href = '/login.html';
    }
    
    // Load market data
    async function loadMarketData() {
      try {
        // Simulated data - in production, fetch from real API
        document.getElementById('btcPrice').textContent = '$96,432';
        document.getElementById('btcChange').textContent = '+2.4%';
        document.getElementById('spyPrice').textContent = '$599';
        document.getElementById('spyChange').textContent = '+0.3%';
        document.getElementById('goldPrice').textContent = '$2,648';
        document.getElementById('goldChange').textContent = '+0.1%';
        document.getElementById('fgValue').textContent = '76';
        document.getElementById('fgLabel').textContent = 'Extreme Greed';
      } catch (e) {
        console.error('Failed to load market data:', e);
      }
    }
    loadMarketData();
    
    // Modal functions
    function openModal(type) {
      const overlay = document.getElementById('modalOverlay');
      const title = document.getElementById('modalTitle');
      const body = document.getElementById('modalBody');
      
      const modals = {
        oracle: { title: 'üîÆ ORACLE‚Ñ¢ Predictive Engine', content: oracleContent() },
        council: { title: 'üèõÔ∏è COUNCIL‚Ñ¢ AI Advisors', content: councilContent() },
        pulse: { title: 'üíì PULSE‚Ñ¢ Real-Time Feed', content: pulseContent() },
        archetype: { title: 'üß† ARCHETYPE‚Ñ¢ Profiling', content: archetypeContent() },
        nexus: { title: 'üåê NEXUS‚Ñ¢ Capital Flows', content: nexusContent() },
        mirror: { title: 'ü™û MIRROR‚Ñ¢ Simulator', content: mirrorContent() },
        phantom: { title: 'üëª PHANTOM‚Ñ¢ Execution', content: phantomContent() },
        sovereign: { title: 'üëë SOVEREIGN‚Ñ¢ Private Deals', content: sovereignContent() },
        atlas: { title: 'üó∫Ô∏è ATLAS‚Ñ¢ Asset Graph', content: atlasContent() },
        sentinel: { title: 'üõ°Ô∏è SENTINEL‚Ñ¢ Risk Engine', content: sentinelContent() },
        comply: { title: '‚öñÔ∏è COMPLY‚Ñ¢ KYC/AML', content: complyContent() },
        wizard: { title: 'üßô Portfolio Wizard', content: wizardContent() },
        scanner: { title: 'üîç Market Scanner', content: scannerContent() },
        signals: { title: 'üìä Trading Signals', content: signalsContent() },
        sizer: { title: 'üéØ Position Sizer', content: sizerContent() },
        alert: { title: 'üîî Set Price Alert', content: alertContent() },
        brokerage: { title: 'üîó Connect Brokerage', content: brokerageContent() }
      };
      
      const modal = modals[type];
      if (modal) {
        title.innerHTML = modal.title;
        body.innerHTML = modal.content;
        overlay.classList.add('active');
      }
    }
    
    function closeModal() {
      document.getElementById('modalOverlay').classList.remove('active');
    }
    
    // ORACLE Content
    function oracleContent() {
      return `
        <div class="form-group">
          <label class="form-label">Asset Symbol</label>
          <input class="form-input" id="oracleSymbol" value="BTC" placeholder="BTC, ETH, NVDA...">
        </div>
        <div class="form-group">
          <label class="form-label">Capital to Deploy ($)</label>
          <input class="form-input" id="oracleCapital" type="number" value="50000">
        </div>
        <button class="btn" onclick="runOracle()">
          <span id="oracleBtnText">üîÆ Run ORACLE Analysis</span>
        </button>
        <div id="oracleResult"></div>
      `;
    }
    
    async function runOracle() {
      const btn = document.querySelector('#oracleBtnText').parentElement;
      const btnText = document.getElementById('oracleBtnText');
      const result = document.getElementById('oracleResult');
      const symbol = document.getElementById('oracleSymbol').value;
      const capital = document.getElementById('oracleCapital').value;
      
      btn.disabled = true;
      btnText.innerHTML = '<div class="spinner"></div> Analyzing...';
      
      try {
        const res = await fetch('/api/oracle-ai/synthesize/' + symbol + '?capital=' + capital);
        const data = await res.json();
        
        if (data.ok) {
          const o = data.oracle;
          const color = o.recommendation.includes('ACCUMULATE') ? 'green' : o.recommendation.includes('REDUCE') ? 'red' : 'gold';
          result.innerHTML = `
            <div class="result-card">
              <div class="result-header">
                <div class="result-title">${symbol}</div>
                <span class="result-badge badge-${color}">${o.recommendation}</span>
              </div>
              <p style="color:var(--muted);margin-bottom:16px;font-size:14px">${o.action}</p>
              <div class="result-grid">
                <div class="result-item">
                  <div class="result-item-label">Confidence</div>
                  <div class="result-item-value">${o.confidence}%</div>
                </div>
                <div class="result-item">
                  <div class="result-item-label">Position Size</div>
                  <div class="result-item-value" style="color:var(--green)">$${o.position_size.toLocaleString()}</div>
                </div>
                <div class="result-item">
                  <div class="result-item-label">Risk Level</div>
                  <div class="result-item-value">${o.risk_level}</div>
                </div>
                <div class="result-item">
                  <div class="result-item-label">Time Horizon</div>
                  <div class="result-item-value">${o.time_horizon || '1-4 weeks'}</div>
                </div>
              </div>
            </div>
          `;
        } else {
          result.innerHTML = '<div class="result-card" style="border-color:var(--red)">Error: ' + (data.error || 'Analysis failed') + '</div>';
        }
      } catch (e) {
        result.innerHTML = '<div class="result-card" style="border-color:var(--red)">Connection error. Please try again.</div>';
      }
      
      btn.disabled = false;
      btnText.innerHTML = 'üîÆ Run ORACLE Analysis';
    }
    
    // COUNCIL Content
    function councilContent() {
      return `
        <div class="form-group">
          <label class="form-label">Investment Question</label>
          <textarea class="form-textarea" id="councilQuestion" rows="3" placeholder="Should I buy NVDA at current prices?">Should I accumulate BTC at $96,000?</textarea>
        </div>
        <button class="btn" onclick="runCouncil()">
          <span id="councilBtnText">üèõÔ∏è Convene Council</span>
        </button>
        <div id="councilResult"></div>
      `;
    }
    
    async function runCouncil() {
      const btn = document.querySelector('#councilBtnText').parentElement;
      const btnText = document.getElementById('councilBtnText');
      const result = document.getElementById('councilResult');
      const question = document.getElementById('councilQuestion').value;
      
      btn.disabled = true;
      btnText.innerHTML = '<div class="spinner"></div> Advisors debating...';
      
      try {
        const res = await fetch('/api/council/convene', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ question })
        });
        const data = await res.json();
        
        if (data.ok) {
          const c = data.council;
          let html = '<div style="max-height:350px;overflow-y:auto;margin-top:16px">';
          
          c.advisors.forEach(a => {
            const stance = a.stance.toLowerCase();
            const stanceClass = stance === 'buy' ? 'buy' : stance === 'sell' ? 'sell' : 'hold';
            const stanceColor = stance === 'buy' ? 'var(--green)' : stance === 'sell' ? 'var(--red)' : 'var(--gold)';
            html += `
              <div class="advisor-card ${stanceClass}">
                <div class="advisor-header">
                  <span class="advisor-name">${a.name}</span>
                  <span class="advisor-stance" style="background:${stanceColor}20;color:${stanceColor}">${a.stance}</span>
                </div>
                <div class="advisor-opinion">"${a.opinion}"</div>
              </div>
            `;
          });
          
          html += `
            <div class="result-card" style="background:linear-gradient(135deg,var(--accent),var(--accent2));border:none;margin-top:16px">
              <strong style="display:block;margin-bottom:8px">üìä Synthesis</strong>
              <div>${c.synthesis.recommendation}</div>
            </div>
          `;
          html += '</div>';
          
          result.innerHTML = html;
        } else {
          result.innerHTML = '<div class="result-card" style="border-color:var(--red)">Error: ' + (data.error || 'Failed') + '</div>';
        }
      } catch (e) {
        result.innerHTML = '<div class="result-card" style="border-color:var(--red)">Connection error</div>';
      }
      
      btn.disabled = false;
      btnText.innerHTML = 'üèõÔ∏è Convene Council';
    }
    
    // PULSE Content
    function pulseContent() {
      return `
        <button class="btn" onclick="loadPulse()">
          <span id="pulseBtnText">üíì Load Alpha Signals</span>
        </button>
        <div id="pulseResult"></div>
      `;
    }
    
    async function loadPulse() {
      const btn = document.querySelector('#pulseBtnText').parentElement;
      const btnText = document.getElementById('pulseBtnText');
      const result = document.getElementById('pulseResult');
      
      btn.disabled = true;
      btnText.innerHTML = '<div class="spinner"></div> Loading signals...';
      
      try {
        const res = await fetch('/api/pulse/feed');
        const data = await res.json();
        
        if (data.ok) {
          let html = '<div style="max-height:400px;overflow-y:auto;margin-top:16px">';
          
          data.signals.forEach(s => {
            const icon = s.type === 'whale' ? 'üêã' : s.type === 'insider' ? 'üëî' : s.type === 'momentum' ? 'üìà' : '‚ö°';
            const sentClass = s.sentiment === 'bullish' ? 'bullish' : s.sentiment === 'bearish' ? 'bearish' : 'neutral';
            const sentColor = s.sentiment === 'bullish' ? 'var(--green)' : s.sentiment === 'bearish' ? 'var(--red)' : 'var(--gold)';
            
            html += `
              <div class="signal-card ${sentClass}">
                <div class="signal-header">
                  <span class="signal-type">${icon}</span>
                  <span class="signal-time">${s.time || 'Just now'}</span>
                </div>
                <div class="signal-message">${s.message}</div>
                <div class="signal-impact" style="color:${sentColor}">${s.impact}</div>
              </div>
            `;
          });
          
          html += '</div>';
          result.innerHTML = html;
        } else {
          result.innerHTML = '<div class="result-card" style="border-color:var(--red)">Error loading signals</div>';
        }
      } catch (e) {
        result.innerHTML = '<div class="result-card" style="border-color:var(--red)">Connection error</div>';
      }
      
      btn.disabled = false;
      btnText.innerHTML = 'üíì Refresh Signals';
    }
    
    // Simple content templates for other modals
    function archetypeContent() {
      return `
        <div class="form-group">
          <label class="form-label">Risk Tolerance (1-10)</label>
          <input class="form-input" id="archRisk" type="number" value="7" min="1" max="10">
        </div>
        <div class="form-group">
          <label class="form-label">Investment Time Horizon</label>
          <select class="form-select" id="archTime">
            <option value="1-3 years">1-3 years</option>
            <option value="5-10 years" selected>5-10 years</option>
            <option value="10+ years">10+ years</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">How do you react to -20% losses?</label>
          <select class="form-select" id="archLoss">
            <option value="panic sell">Panic sell everything</option>
            <option value="hold anxiously">Hold but lose sleep</option>
            <option value="hold calmly" selected>Hold calmly</option>
            <option value="buy more">Buy more aggressively</option>
          </select>
        </div>
        <button class="btn" onclick="runArchetype()">
          <span id="archBtnText">üß† Generate Profile</span>
        </button>
        <div id="archResult"></div>
      `;
    }
    
    async function runArchetype() {
      const btn = document.querySelector('#archBtnText').parentElement;
      const btnText = document.getElementById('archBtnText');
      const result = document.getElementById('archResult');
      
      btn.disabled = true;
      btnText.innerHTML = '<div class="spinner"></div> Analyzing...';
      
      try {
        const res = await fetch('/api/archetype/profile', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            riskTolerance: document.getElementById('archRisk').value,
            timeHorizon: document.getElementById('archTime').value,
            lossReaction: document.getElementById('archLoss').value
          })
        });
        const data = await res.json();
        
        if (data.ok) {
          const p = data.profile;
          result.innerHTML = `
            <div class="result-card">
              <div class="result-header">
                <div class="result-title">${p.archetype_name || 'Your Profile'}</div>
                <span class="result-badge badge-purple">${p.investor_match || 'Balanced'}</span>
              </div>
              <p style="color:var(--muted);font-size:14px;margin-bottom:16px">${p.description || 'Analysis complete'}</p>
              <div style="background:var(--bg);border-radius:10px;padding:16px">
                <div style="font-weight:600;margin-bottom:8px">Key Traits</div>
                <div style="font-size:13px;color:var(--muted)">${JSON.stringify(p.traits || p, null, 2).substring(0, 500)}</div>
              </div>
            </div>
          `;
        } else {
          result.innerHTML = '<div class="result-card" style="border-color:var(--red)">Error: ' + (data.error || 'Failed') + '</div>';
        }
      } catch (e) {
        result.innerHTML = '<div class="result-card" style="border-color:var(--red)">Connection error</div>';
      }
      
      btn.disabled = false;
      btnText.innerHTML = 'üß† Generate Profile';
    }
    
    function nexusContent() {
      return `
        <div class="form-group">
          <label class="form-label">Sector</label>
          <select class="form-select" id="nexusSector">
            <option value="Technology">Technology</option>
            <option value="Healthcare">Healthcare</option>
            <option value="Finance">Finance</option>
            <option value="Energy">Energy</option>
            <option value="Crypto">Crypto</option>
          </select>
        </div>
        <button class="btn" onclick="runNexus()">
          <span id="nexusBtnText">üåê Detect Capital Flows</span>
        </button>
        <div id="nexusResult"></div>
      `;
    }
    
    async function runNexus() {
      const btn = document.querySelector('#nexusBtnText').parentElement;
      const btnText = document.getElementById('nexusBtnText');
      const result = document.getElementById('nexusResult');
      const sector = document.getElementById('nexusSector').value;
      
      btn.disabled = true;
      btnText.innerHTML = '<div class="spinner"></div> Detecting flows...';
      
      try {
        const res = await fetch('/api/nexus/flows/' + sector);
        const data = await res.json();
        
        if (data.ok) {
          result.innerHTML = `<div class="result-card"><pre style="font-size:12px;overflow-x:auto">${JSON.stringify(data.flows, null, 2)}</pre></div>`;
        } else {
          result.innerHTML = '<div class="result-card" style="border-color:var(--red)">Error</div>';
        }
      } catch (e) {
        result.innerHTML = '<div class="result-card" style="border-color:var(--red)">Connection error</div>';
      }
      
      btn.disabled = false;
      btnText.innerHTML = 'üåê Detect Capital Flows';
    }
    
    function mirrorContent() {
      return `
        <div class="form-group">
          <label class="form-label">Stress Scenario</label>
          <select class="form-select" id="mirrorScenario">
            <option value="2008 Financial Crisis">2008 Financial Crisis</option>
            <option value="COVID Crash 2020">COVID Crash 2020</option>
            <option value="Rising Interest Rates">Rising Interest Rates</option>
            <option value="Crypto Winter">Crypto Winter</option>
          </select>
        </div>
        <button class="btn" onclick="runMirror()">
          <span id="mirrorBtnText">ü™û Run Stress Test</span>
        </button>
        <div id="mirrorResult"></div>
      `;
    }
    
    async function runMirror() {
      const btn = document.querySelector('#mirrorBtnText').parentElement;
      const btnText = document.getElementById('mirrorBtnText');
      const result = document.getElementById('mirrorResult');
      const scenario = document.getElementById('mirrorScenario').value;
      
      btn.disabled = true;
      btnText.innerHTML = '<div class="spinner"></div> Simulating...';
      
      try {
        const res = await fetch('/api/mirror/stress-test', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            portfolio: { holdings: ['BTC:40%', 'ETH:30%', 'NVDA:30%'] },
            scenario
          })
        });
        const data = await res.json();
        
        if (data.ok) {
          result.innerHTML = `<div class="result-card"><pre style="font-size:12px;overflow-x:auto">${JSON.stringify(data.stress, null, 2)}</pre></div>`;
        } else {
          result.innerHTML = '<div class="result-card" style="border-color:var(--red)">Error</div>';
        }
      } catch (e) {
        result.innerHTML = '<div class="result-card" style="border-color:var(--red)">Connection error</div>';
      }
      
      btn.disabled = false;
      btnText.innerHTML = 'ü™û Run Stress Test';
    }
    
    // Placeholder content for other modals
    function phantomContent() { return '<p style="color:var(--muted);text-align:center;padding:40px">Stealth execution intelligence coming soon...</p>'; }
    function sovereignContent() { return '<p style="color:var(--muted);text-align:center;padding:40px">Private deal matching coming soon...</p>'; }
    function atlasContent() { return '<p style="color:var(--muted);text-align:center;padding:40px">Asset graph intelligence coming soon...</p>'; }
    function sentinelContent() { return '<p style="color:var(--muted);text-align:center;padding:40px">Risk guardrails coming soon...</p>'; }
    function complyContent() { return '<p style="color:var(--muted);text-align:center;padding:40px">KYC/AML compliance coming soon...</p>'; }
    function scannerContent() { return '<p style="color:var(--muted);text-align:center;padding:40px">Market scanner coming soon...</p>'; }
    function signalsContent() { return '<p style="color:var(--muted);text-align:center;padding:40px">Trading signals coming soon...</p>'; }
    function sizerContent() { return '<p style="color:var(--muted);text-align:center;padding:40px">Position sizer coming soon...</p>'; }
    
    function wizardContent() {
      return `
        <div class="form-group">
          <label class="form-label">Investment Amount ($)</label>
          <input class="form-input" id="wizAmount" type="number" value="100000">
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Time Horizon</label>
            <select class="form-select" id="wizTime">
              <option value="1-3 years">1-3 years</option>
              <option value="5-10 years" selected>5-10 years</option>
              <option value="10+ years">10+ years</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Risk (1-10)</label>
            <input class="form-input" id="wizRisk" type="number" value="7" min="1" max="10">
          </div>
        </div>
        <button class="btn" onclick="runWizard()">
          <span id="wizBtnText">‚ú® Build Portfolio</span>
        </button>
        <div id="wizResult"></div>
      `;
    }
    
    async function runWizard() {
      const btn = document.querySelector('#wizBtnText').parentElement;
      const btnText = document.getElementById('wizBtnText');
      const result = document.getElementById('wizResult');
      
      btn.disabled = true;
      btnText.innerHTML = '<div class="spinner"></div> Building...';
      
      try {
        const res = await fetch('/api/ai/portfolio-wizard', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            portfolioValue: document.getElementById('wizAmount').value,
            timeHorizon: document.getElementById('wizTime').value,
            riskTolerance: document.getElementById('wizRisk').value
          })
        });
        const data = await res.json();
        
        if (data.ok) {
          result.innerHTML = `<div class="result-card"><pre style="font-size:13px;white-space:pre-wrap">${data.analysis}</pre></div>`;
        } else {
          result.innerHTML = '<div class="result-card" style="border-color:var(--red)">Error</div>';
        }
      } catch (e) {
        result.innerHTML = '<div class="result-card" style="border-color:var(--red)">Connection error</div>';
      }
      
      btn.disabled = false;
      btnText.innerHTML = '‚ú® Build Portfolio';
    }
    
    function alertContent() {
      return `
        <div class="form-group">
          <label class="form-label">Symbol</label>
          <input class="form-input" id="alertSymbol" value="BTC">
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Target Price ($)</label>
            <input class="form-input" id="alertPrice" type="number" value="100000">
          </div>
          <div class="form-group">
            <label class="form-label">Direction</label>
            <select class="form-select" id="alertDir">
              <option value="above">Above ‚Üë</option>
              <option value="below">Below ‚Üì</option>
            </select>
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">Phone (for SMS)</label>
          <input class="form-input" id="alertPhone" placeholder="+1234567890">
        </div>
        <button class="btn" onclick="createAlert()">
          <span id="alertBtnText">üîî Create Alert</span>
        </button>
        <div id="alertResult"></div>
      `;
    }
    
    async function createAlert() {
      const btn = document.querySelector('#alertBtnText').parentElement;
      const btnText = document.getElementById('alertBtnText');
      const result = document.getElementById('alertResult');
      
      btn.disabled = true;
      btnText.innerHTML = '<div class="spinner"></div> Creating...';
      
      // Simulated success
      setTimeout(() => {
        result.innerHTML = '<div class="result-card" style="border-color:var(--green);color:var(--green)">‚úì Alert created successfully!</div>';
        btn.disabled = false;
        btnText.innerHTML = 'üîî Create Alert';
      }, 1000);
    }
    
    function brokerageContent() {
      return `
        <p style="color:var(--muted);margin-bottom:20px">Connect your brokerage to sync your portfolio and get personalized recommendations.</p>
        <div style="display:grid;gap:12px">
          <button class="btn secondary" style="justify-content:flex-start;padding-left:20px">
            <span style="font-size:20px;margin-right:12px">üè¶</span> Robinhood
          </button>
          <button class="btn secondary" style="justify-content:flex-start;padding-left:20px">
            <span style="font-size:20px;margin-right:12px">üìà</span> TD Ameritrade
          </button>
          <button class="btn secondary" style="justify-content:flex-start;padding-left:20px">
            <span style="font-size:20px;margin-right:12px">üíé</span> Fidelity
          </button>
          <button class="btn secondary" style="justify-content:flex-start;padding-left:20px">
            <span style="font-size:20px;margin-right:12px">ü™ô</span> Coinbase
          </button>
        </div>
        <p style="color:var(--muted);font-size:12px;margin-top:16px;text-align:center">Powered by Plaid. Your credentials are never stored.</p>
      `;
    }
  </script>

  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js').then(() => console.log('SW registered'));
    }
  </script>

  <!-- Risk Disclaimer Footer -->
  <footer class="risk-footer" style="background: rgba(0,0,0,0.5); border-top: 1px solid rgba(99,102,241,0.2); padding: 24px 20px; margin-top: 60px; text-align: center;">
    <p style="color: #6b7280; font-size: 12px; max-width: 900px; margin: 0 auto 12px; line-height: 1.6;">
      ‚ö†Ô∏è <strong>Risk Disclosure:</strong> Trading and investing involves substantial risk. Past performance does not guarantee future results. The information provided is for educational purposes only and should not be construed as financial advice. Always conduct your own research and consult with a qualified financial advisor.
    </p>
    <p style="color: #4b5563; font-size: 11px;">
      ¬© 2025 ELUXRAJ‚Ñ¢ | <a href="/terms.html" style="color: #6366f1; text-decoration: none;">Terms</a> | <a href="/privacy.html" style="color: #6366f1; text-decoration: none;">Privacy</a> | <a href="/disclaimer.html" style="color: #6366f1; text-decoration: none;">Full Disclaimer</a>
    </p>
  </footer>
</body>
</html>
